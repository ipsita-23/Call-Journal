<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Call Journal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Merriweather&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Merriweather", serif;
      }
      h2,
      .logo {
        font-family: "Dancing Script", cursive;
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-purple-100 via-pink-100 to-purple-200 text-[#3c3c3c] flex flex-col min-h-screen">
    
    <!-- Navbar -->
    <nav class="w-full bg-gradient-to-r from-purple-400 to-pink-300 shadow-md py-4 px-6 flex items-center justify-center">
      <span class="logo text-3xl text-white font-bold tracking-wide"> Call Journal</span>
    </nav>

    <div class="flex flex-1" >
      <!-- Left column -->
      <div
        class="flex flex-col items-center bg-gradient-to-b from-purple-50 to-purple-100 border-r border-purple-200 p-4"
      >
      <div class="w-[700px] h-[800px] overflow-hidden rounded-xl">
        <img
          src="static/10ee4858-9992-4094-ac38-3e5767f9ca4a.jpg"
          alt="Call Journal Image"
          class="w-100 h-100 rounded-xl shadow-lg mb-2 border-4 border-purple-200 object-cover"
        />
        </div>
      </div>

      <!-- Right column -->
      <div class="flex-1 w-full flex flex-col items-center p-6 mt-20">
        <div
          class="bg-white/80 backdrop-blur-md shadow-lg w-full max-w-2xl flex flex-col gap-6 rounded-2xl border border-purple-200"
        >
          <!-- Mini Heading Bar -->
          <div class="bg-gradient-to-r from-purple-200 to-pink-200 px-4 py-2 rounded-t-2xl border-b border-purple-300 shadow-sm">
            <h2 class="flex justify-center text-lg font-semibold text-purple-800">Analyze Your Call</h2>
          </div>

          <!-- Form -->
          <div class="p-6 flex flex-col gap-4">
            <form method="POST" class="flex flex-col gap-4">
              <textarea
                name="transcript"
                placeholder="Write or paste your call transcript here..."
                class="w-full h-40 bg-purple-50 border border-purple-200 rounded-xl p-4 resize-y outline-none shadow-inner focus:ring-2 focus:ring-purple-300"
              >{{ transcript or "" }}</textarea>
              <button
                type="submit"
                class="bg-gradient-to-r from-purple-400 to-pink-300 text-white font-bold py-3 px-4 rounded-xl transition-all duration-200 hover:scale-105 hover:shadow-md"
              >
                Save & Analyze
              </button>
            </form>

            {% if saved %}
            <div
              class="bg-purple-50 border border-purple-200 rounded-xl p-4 mt-2 shadow-sm"
            >
              <h2 class="text-lg font-semibold text-purple-700">Summary</h2>
              <p class="mt-2 text-gray-700">{{ summary }}</p>
              <span
                class="sentiment {{ sentiment }} inline-block mt-2 px-3 py-1 rounded-lg font-bold text-sm"
                >{{ sentiment }}</span
              >
            </div>
            {% endif %}

            {% if preview %}
            <div class="bg-purple-50 border border-purple-200 rounded-xl p-4 mt-4 shadow-sm">
              <h2 class="text-lg font-semibold text-purple-700">Recent Entries</h2>
              <table
                class="w-full border-collapse mt-2 text-sm bg-purple-50 rounded-lg overflow-hidden border border-purple-200"
              >
                <thead>
                  <tr class="bg-purple-100 text-purple-800 font-bold">
                    <th class="text-left p-3">Summary</th>
                    <th class="text-left p-3">Sentiment</th>
                  </tr>
                </thead>
                <tbody>
                  {% for row in preview %}
                  <tr class="border-b border-purple-200 last:border-b-0 hover:bg-purple-100/50">
                    <td class="p-3">{{ row['Summary'] }}</td>
                    <td class="p-3">
                      <span
                        class="sentiment {{ row['Sentiment'] }} inline-block px-3 py-1 rounded-lg font-bold text-sm"
                        >{{ row['Sentiment'] }}</span
                      >
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <!-- Sentiment classes -->
    <style>
      .sentiment.Positive {
        background: #e9d5ff;
        color: #5b21b6;
      }
      .sentiment.Negative {
        background: #fbcfe8;
        color: #9d174d;
      }
      .sentiment.Neutral {
        background: #ddd6fe;
        color: #4338ca;
      }
    </style>
  </body>
</html>
